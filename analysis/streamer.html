
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>The ROOT streamer ¬∑ ALICE Analysis Tutorial</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-block-align/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-toc/page-toc.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../css/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="destructor.html" />
    
    
    <link rel="prev" href="trouble.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../start/">
            
                <a href="../start/">
            
                    
                    Getting started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../start/cert.html">
            
                <a href="../start/cert.html">
            
                    
                    Get a Grid certificate
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../building/">
            
                <a href="../building/">
            
                    
                    Build ALICE software
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../building/custom.html">
            
                <a href="../building/custom.html">
            
                    
                    üß™ Installation via alibuild
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../building/prereq-centos7.html">
            
                <a href="../building/prereq-centos7.html">
            
                    
                    Prerequisites for CentOS 7
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../building/prereq-centos8.html">
            
                <a href="../building/prereq-centos8.html">
            
                    
                    Prerequisites for CentOS 8
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../building/prereq-macos.html">
            
                <a href="../building/prereq-macos.html">
            
                    
                    Prerequisites for macOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../building/prereq-ubuntu.html">
            
                <a href="../building/prereq-ubuntu.html">
            
                    
                    Prerequisites for Ubuntu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../building/prereq-fedora.html">
            
                <a href="../building/prereq-fedora.html">
            
                    
                    Prerequisites for Fedora
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../building/build.html">
            
                <a href="../building/build.html">
            
                    
                    üõ† Build the packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../building/precomp.html">
            
                <a href="../building/precomp.html">
            
                    
                    üì¶ Use the precompiled binaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../building/devel.html">
            
                <a href="../building/devel.html">
            
                    
                    üí™ Develop a single package (Experimental)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <a target="_blank" href="https://github.com/alidock/alidock/wiki">
            
                    
                    üê≥ Using alidock
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="welcome.html">
            
                <a href="welcome.html">
            
                    
                    Writing an analysis task
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="classes.html">
            
                <a href="classes.html">
            
                    
                    AliAnalysisTaskSE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="alianalysistaskmytask.html">
            
                <a href="alianalysistaskmytask.html">
            
                    
                    Your analysis task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="local.html">
            
                <a href="local.html">
            
                    
                    Running locally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="rungrid.html">
            
                <a href="rungrid.html">
            
                    
                    Running on Grid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="lego.html">
            
                <a href="lego.html">
            
                    
                    The LEGO train system
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="monalisa.html">
            
                <a href="monalisa.html">
            
                    
                    AliMonitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="oadb.html">
            
                <a href="oadb.html">
            
                    
                    Offline analysis database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="trouble.html">
            
                <a href="trouble.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.9" data-path="streamer.html">
            
                <a href="streamer.html">
            
                    
                    The ROOT streamer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="destructor.html">
            
                <a href="destructor.html">
            
                    
                    Destructors
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    Analysis tutorial exercises
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="setup.html">
            
                <a href="setup.html">
            
                    
                    Step 1 - Setup the tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="running.html">
            
                <a href="running.html">
            
                    
                    Step 2 - Running the task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="modify.html">
            
                <a href="modify.html">
            
                    
                    Step 3 - Modify the task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="track.html">
            
                <a href="track.html">
            
                    
                    Step 4 -The track loop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="pid.html">
            
                <a href="pid.html">
            
                    
                    Step 5 -Particle identification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="MC.html">
            
                <a href="MC.html">
            
                    
                    Step 6 -Using Monte Carlo data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="grid.html">
            
                <a href="grid.html">
            
                    
                    Step 7 -Run your code on GRID
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="bonus.html">
            
                <a href="bonus.html">
            
                    
                    Bonus content
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="hints.html">
            
                <a href="hints.html">
            
                    
                    Some hints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="ROOT5-to-6.html">
            
                <a href="ROOT5-to-6.html">
            
                    
                    Transition from ROOT5 to ROOT6
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../rivet/rivet-tutorial.html">
            
                <a href="../rivet/rivet-tutorial.html">
            
                    
                    Rivet
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../rivet/getting-started.html">
            
                <a href="../rivet/getting-started.html">
            
                    
                    Getting started with Rivet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../rivet/rivet-in-alice.html">
            
                <a href="../rivet/rivet-in-alice.html">
            
                    
                    Using Rivet in ALICE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../rivet/implementing-rivet-analysis.html">
            
                <a href="../rivet/implementing-rivet-analysis.html">
            
                    
                    Implementing a Rivet analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../rivet/hi-features.html">
            
                <a href="../rivet/hi-features.html">
            
                    
                    Introduction to heavy-ion features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../rivet/reference-manual.html">
            
                <a href="../rivet/reference-manual.html">
            
                    
                    Reference manual for Rivet in ALICE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../rivet/publishing-procedures.html">
            
                <a href="../rivet/publishing-procedures.html">
            
                    
                    Procedures for publishing Rivet analyses
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../rivet/advanced-topics.html">
            
                <a href="../rivet/advanced-topics.html">
            
                    
                    Advanced topics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../rivet/advanced-hi-features.html">
            
                <a href="../rivet/advanced-hi-features.html">
            
                    
                    Advanced heavy-ion features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../rivet/coding-conventions.html">
            
                <a href="../rivet/coding-conventions.html">
            
                    
                    Coding conventions for Rivet plugins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../rivet/references.html">
            
                <a href="../rivet/references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >The ROOT streamer</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="the-root-streamer">The ROOT Streamer</h1>
<p>Sometimes, mails like</p>
<pre><code>`Dear experts,
        my task worked fine &lt;enter_date&gt; but now 
        on grid it does not. can you take a look ? &apos;
</code></pre><p>are sent on the mailing list. Some unexpected errors are caused by misuse of the <strong>ROOT streamer</strong>. The streamer has been mentioned a couple of times before now in other sections. So what is the &#x2018;<strong>streamer</strong> to begin with?</p>
<ul>
<li>The ROOT streamer <strong>decomposes</strong> an object into its data members
(<strong>serialization</strong>) and writes it to disk</li>
</ul>
<p>This sounds more confusing than it is. Take a look at our class example from section 1</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> Polygon
{
 <span class="hljs-keyword">private</span>:
  <span class="hljs-keyword">int</span> width, height;
}
</code></pre>
<p>The job of the streamer here would be, to save values of height and width, so that they can be written to disk. </p>
<h2 id="the-automatically-generated-streamer">The automatically generated streamer</h2>
<p>ROOT automatically generates a steamer for us, if we instruct it to do so. Remember from the earlier sections, that we put the following lines in our task:</p>
<pre><code class="lang-cpp">          <span class="hljs-comment">// tell ROOT the class version</span>
          ClassDef(AliAnalysisMyTask,<span class="hljs-number">1</span>);
        };
</code></pre>
<p>By doing this, a streamer is constructed for us by invoking the <code>ClassDef</code> macro. </p>
<h2 id="customization">Customization</h2>
<p>ROOT generates a streamer for us, but we have the task of customizing it. Customization means defining what data members <strong>should</strong> and <strong>should not</strong> be touched by the streamer. Customization is done in the <strong>header *.h)</strong> of a class, by giving specific instructions in the comments written after the declaration of data members (i.e. &#x2018;//&#x2019;). Let&apos;s take a look at this in practice. </p>
<h2 id="customizing-member-persistence">Customizing: &#x2018;member persistence&#x2019;</h2>
<ul>
<li><p>Persistent Members (//) are &#x2018;streamed&#x2019; (copied/stored)</p>
<pre><code class="lang-cpp">        <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
            <span class="hljs-keyword">private</span>:
               Int_t   fMinEta;     <span class="hljs-comment">// min eta value</span>
               Int_t   fMaxEta;     <span class="hljs-comment">// max eta value</span>
                  ...
</code></pre>
</li>
<li><p>Transient Members (//!) are <strong>not</strong> streamed</p>
<pre><code class="lang-cpp">        <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
                  ...
               AliAODEvent*    fAOD;        <span class="hljs-comment">//! current event</span>
               TH1F*           fHistPt;     <span class="hljs-comment">//! our histogram</span>
</code></pre>
</li>
</ul>
<p>So if we would write the object defined by the code snippets above to disk, the value of <code>fMinEta</code> and <code>fMaxEta</code> will be saved (//), but the values of  <code>fAOD</code> and <code>fHistPt</code> will be ignored (//!).</p>
<h3 id="advanced-use-cases">Advanced use cases</h3>
<p>We can customize the streamer in more sophisticated ways</p>
<ul>
<li><p>The Pointer to Objects (//-$&gt;$) calls streamer of the object
directly</p>
<pre><code class="lang-cpp">        <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
            <span class="hljs-keyword">private</span>:
               TClonesArray  *fTracks;            <span class="hljs-comment">//-&gt;</span>
                  ...
</code></pre>
</li>
<li><p>Variable Length Array, (so that not just the pointer is copied)</p>
<pre><code class="lang-cpp">        <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
                  Int_t          fNvertex;
                  ...
                  Float_t       *fClosestDistance;   <span class="hljs-comment">//[fNvertex]</span>
</code></pre>
<p>All this is explained in <strong>detail</strong> in 11.3 of the ROOT documentation <a href="https://root.cern.ch/root/htmldoc/guides/users-guide/ROOTUsersGuide.html" target="_blank">https://root.cern.ch/root/htmldoc/guides/users-guide/ROOTUsersGuide.html</a></p>
</li>
</ul>
<p><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(6251126620);" id="streamers-and-doxygen"><i class="fa fa-info-circle"></i> Streamers and doxygen<span id="heading-6251126620"></span></h3></div><div class="panel-body" id="panel-6251126620"><p>In the second subsection of this tutorial, you saw that the streamer directives looked a bit different. This is, because we sometimes use member comments in header files for yet <strong>another</strong> purpose: creating automatic code documentation with Doxygen. Doxygen is a way of documenting your code inside the source code itself, by factoring special comments that will be ignored by the C++ compiler. </p>
<p>Doxygen uses both //!&lt; and ///&lt; to introduce a data member comment. Until ROOT 5, this allowed using //!&lt; for indicating a transient data member. ROOT 6 abruptly broke this compatibility and //!&lt; does not mean transient anymore: we are now forced to use //!&lt;! for introducing a Doxygen comment interpreted as transient in both ROOT 5 and ROOT 6.</p>
</div></div></p>
<h1 id="pitfalls">Pitfalls</h1>
<p>We started this section out, by saying that the streamer definition can be a source of confusion. Why is this so? </p>
<p>Let&apos;s start by realizing when the streamer definition is actually relevant: this is when objects are written to disk or copied. If you run your analysis <strong>locally</strong>, your analysis task is (probably) never copied or stored to disk, ergo the streamer information is never used and specifying // or //! are equivalent</p>
<p>If you run on Grid, or on the LEGO train system, the situation is different, and the following happens</p>
<ul>
<li>Your task is initialized <strong>locally</strong> and added to the analysis <strong>manager</strong></li>
<li>The manager is <strong>stored</strong> locally in a .root file</li>
<li>This file is <strong>copied</strong> to grid nodes, invoking the streamer</li>
<li>At the grid node, a <strong>fresh</strong> instance of your task is created</li>
<li>Non-persistent members are initialized to their default values found
in the <strong>empty I/O constructor</strong> (remember that we said in Section 3: you always need to specify an empty I/O constructor for your classes!)</li>
<li><strong>Persistent</strong> members are read from the .root file</li>
</ul>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(2051911142);" id="example-1---unexpected-behavior"><i class="fa fa-square-o"></i> Example 1 - &apos;unexpected&apos; behavior<span id="heading-2051911142"></span></h3></div><div class="panel-body" id="panel-2051911142"><p>Take a look at the class below</p>
<pre><code class="lang-cpp">    <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject 
        Int_t   fAbsEta; <span class="hljs-comment">//!</span>
        <span class="hljs-comment">// setter</span>
        SetAbsEta(Float_t eta) {fAbsEta = eta;}

        <span class="hljs-comment">// ROOT IO constructor</span>
    SomeClass::SomeClass() : 
    fAbsEta(<span class="hljs-number">0</span>) {;}

</code></pre>
<p>In your steering macro, you call</p>
<pre><code>    SomeClass-&gt;SetAbsEta(3);
</code></pre><p>You now launch your analysis to run on the Grid. What is the value of <code>fAbsEta</code> when the analysis starts to run at a Grid node?</p>
<div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(1282996779);" id="click-to-show-answerclick-to-expand"><i class="fa fa-line-chart"></i> Click to show answer<span id="heading-1282996779">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-1282996779"><p>After copying (e.g. to grid) the value of <code>fAbsEta</code> = 0. The member is <em>not persistent</em> (//!), so after copying, the value of <code>fAbsEta</code> will be equal to its default value as specified in the I/O constructor of your class.</p>
</div></div></div></div></p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(523648379);" id="example-2---expected-behavior"><i class="fa fa-square-o"></i> Example 2 - expected behavior?<span id="heading-523648379"></span></h3></div><div class="panel-body" id="panel-523648379"><p>Now take a look at a second, very similar class:</p>
<pre><code class="lang-cpp">    <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject 
        Int_t   fAbsEta; <span class="hljs-comment">//</span>
        <span class="hljs-comment">// setter</span>
        SetAbsEta(Float_t eta) {fAbsEta = eta;}

        <span class="hljs-comment">// ROOT IO constructor</span>
    SomeClass::SomeClass() : 
    fAbsEta(<span class="hljs-number">0</span>) {;}
</code></pre>
<p>Again, we call</p>
<pre><code class="lang-cpp">    SomeClass-&gt;SetAbsEta(<span class="hljs-number">3</span>);
</code></pre>
<p>And launch our analysis task on the Grid. What is the value of <code>fAbsEta</code> when your task starts to run on a Grid node? </p>
<div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(6220180627);" id="click-to-show-answerclick-to-expand"><i class="fa fa-line-chart"></i> Click to show answer<span id="heading-6220180627">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-6220180627"><p>After copying (e.g. to grid) <code>fAbsEta</code> = 3. The member is declared as <em>persistent</em>, so the value it has is retained. </p>
</div></div></div></div></p>
<p>So you see, that the streamer can have quite an important effect on your analysis!</p>
<h2 id="runtime">Runtime</h2>
<p>When you launch your analysis to Grid, it&apos;s important to realize that <em>some</em> methods of your analysis task are called on your laptop when you execute your steering macro, whereas other methods are only called on the Grid nodes. The execution on Grid is what we call <code>runtime</code>. </p>
<p>Looking at the functions of our analysis task, we can e.g. say that </p>
<pre><code class="lang-cpp">      <span class="hljs-comment">// constructor: called locally</span>
      AliAnalysisMyTask(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*);

      <span class="hljs-comment">// function called once at RUNTIME</span>
      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UserCreateOutputObjects</span><span class="hljs-params">()</span></span>;

      <span class="hljs-comment">// functions for each event at RUNTIME</span>
      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UserExec</span><span class="hljs-params">(Option_t*)</span></span>;
</code></pre>
<p>It makes no sense to make data members that are <strong>initialized at runtime</strong> persistent. Therefore, as a rule-of-thumb, for all your <strong>output</strong> histograms, use the flag for non-persistence, i.e.</p>
<pre><code class="lang-cpp">      TH1F*       fHistPt;        <span class="hljs-comment">//! pt histo</span>
</code></pre>
<h2 id="automatic-schema-evolution">Automatic Schema Evolution</h2>
<p>If you <strong>develop</strong> your code, the layout of persistent members of your class probably changes, i.e.</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> Polygon
{
 <span class="hljs-keyword">private</span>:
  <span class="hljs-keyword">int</span> width;
}
</code></pre>
<p>which would take up 4 bytes, could change to </p>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> Polygon
{
 <span class="hljs-keyword">private</span>:
  <span class="hljs-keyword">int</span> width, height;
}
</code></pre>
<p>which would take up 8 bytes when written to disk. The <strong>ClassDef value</strong> of your class bookkeeps this evolution for ROOT and avoids compatibility problems such as</p>
<pre><code>   `The StreamerInfo of class AliAnalysisTaskMyTask
   has the same version (=1) as the active class but a 
   different checksum.  Do not try to write, ..., 
   the files will not be readable.&apos;
</code></pre><p>If you commit your code to AliPhysics (or AliROOT), you should make sure to increment the ClassDef value when you change the list of <strong>persistent</strong> members, i.e. if we have a class</p>
<pre><code class="lang-cpp">            <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
                <span class="hljs-keyword">private</span>:
                   Int_t   fAbsEta;     <span class="hljs-comment">// min eta value</span>
                      ...
            ClassDef(SomeClass, <span class="hljs-number">1</span>);
</code></pre>
<p>and we add a persistent member, we have to increment to ClassDef value</p>
<pre><code class="lang-cpp">             <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
                <span class="hljs-keyword">private</span>:
                   Int_t   fMinEta;     <span class="hljs-comment">// min eta value</span>
                   Int_t   fMaxEta;     <span class="hljs-comment">// max eta value</span>
                ...
            ClassDef(SomeClass, <span class="hljs-number">2</span>);
</code></pre>
<p>If the list of <strong>non-persistent</strong> members changes, e.g. when we change</p>
<pre><code class="lang-cpp">            <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
                <span class="hljs-keyword">private</span>:
                   Int_t   fAbsEta;     <span class="hljs-comment">//! min eta value</span>
                      ...
            ClassDef(SomeClass, <span class="hljs-number">1</span>);
</code></pre>
<p>into   </p>
<pre><code class="lang-cpp">             <span class="hljs-keyword">class</span> SomeClass : <span class="hljs-keyword">public</span> TObject {
                <span class="hljs-keyword">private</span>:
                   Int_t   fMinEta;     <span class="hljs-comment">//! min eta value</span>
                   Int_t   fMaxEta;     <span class="hljs-comment">//! max eta value</span>
                ...
            ClassDef(SomeClass, <span class="hljs-number">1</span>);
</code></pre>
<p>we <strong>do not</strong> have to increment the ClassDef value, because the streamer definition of the class does not change.             </p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="trouble.html" class="navigation navigation-prev " aria-label="Previous page: Troubleshooting">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="destructor.html" class="navigation navigation-next " aria-label="Next page: Destructors">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"The ROOT streamer","level":"1.4.9","depth":2,"next":{"title":"Destructors","level":"1.4.10","depth":2,"path":"analysis/destructor.md","ref":"analysis/destructor.md","articles":[]},"previous":{"title":"Troubleshooting","level":"1.4.8","depth":2,"path":"analysis/trouble.md","ref":"analysis/trouble.md","articles":[]},"dir":"ltr"},"config":{"plugins":["katex","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#117012fdc18c96831cb88196980c0ea73b0c87b8","collapsible-menu","block-align","page-toc"],"styles":{"website":"css/website.css"},"pluginsConfig":{"collapsible-menu":{},"block-align":{},"search":{},"page-toc":{"position":"before-first","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4","showByDefault":true},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"ALICE Analysis Tutorial","gitbook":"*","description":"Introduction to the common analysis techniques and tools of ALICE"},"file":{"path":"analysis/streamer.md","mtime":"2021-05-16T22:28:14.953Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-05-16T22:29:16.808Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc/anchor-3.1.1.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc/page-toc.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

